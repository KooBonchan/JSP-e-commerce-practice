<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login to FretBeat</title>
    <link rel="stylesheet" href="style/theme.css">
    <link rel="stylesheet" href="style/auth.css">
</head>

<body>
	<form action="login" method="post" name="formLogin">
		<div class="input-container">
		
	        <div class="logo">FretBeat</div>
	        <input name="id" autocomplete="username" placeholder="ID">
	        <input type="password" name="password" autocomplete="current-password" placeholder="Password">
	        <div id="submit-button" class="button">Log In</div>
	        <div id="signup-button" class="button">Sign up</div>
    	</div>
    </form>
    <div id="error-invalid-credentials" style="color: red; display: none;">
        Invalid credentials, please try again.
    </div>
    <div id="error-session-end" style="color: red; display: none;">
        Session ended.
    </div>
</body>
<script>
function getQueryParameter(name) {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get(name);
}
const error = getQueryParameter('error');
if(error != null){
	if (error == 'invalid_credentials') {
	    document.getElementById('error-invalid-credentials').style.display = 'block'; // Show the error message
	}
	else if (error == 'not_authenticated') {
	    document.getElementById('error-session-end').style.display = 'block'; // Show the error message
	}	
}

const signupButton = document.getElementById("signup-button");
signupButton.addEventListener("click", function(e) {
	location.href = "signup.html";
})
document.getElementById("submit-button").addEventListener("click", function(e) {
	const form = document.formLogin;
	if(form.id.value.length == 0){
		alert("Write your ID");
		form.id.focus();
		return;
	}
	if(form.password.value.length == 0){
		alert("Write your Password");
		form.password.focus();
		return;
	}
	form.submit();
});
</script>
</html>